import{r as e,j as a}from"./three-vendor--4Ld4C0w.js";import"./react-vendor-DZJm6EwP.js";const s={butterfliesDelay:400,sparklesDelay:600,floralDelay:200,typingSpeed:48},i={count:18,baseDuration:10,durationVariance:5},t={count:35,maxDelay:6,baseDuration:3,durationVariance:3},r={count:15,maxDelay:8,baseDuration:12,durationVariance:6},l={line1:"No s√© si sean las mariposas amarillas del realismo m√°gico,",line2:"o las mariposas que me dan en el est√≥mago mientras escribo esto,",line3:"o las mariposas que aletean a nuestro favor...",line4:"Pero cada una de ellas vuela hacia ti, Pau.",line6:"Y yo las sigo."},n=[{lineKey:"line1",delay:1500},{lineKey:"line2",delay:4200},{lineKey:"line3",delay:7200},{lineKey:"line4",delay:1e4},{lineKey:"line6",delay:12500}];function o(){const[o,d]=e.useState(!1),[c,m]=e.useState(!1),[u,h]=e.useState(!1),[y,p]=e.useState(!1),x=((a,s,i)=>{const[t,r]=e.useState(Object.keys(a).reduce((e,a)=>({...e,[a]:""}),{}));return e.useEffect(()=>{const e=[],t=[];return s.forEach(({lineKey:s,delay:l})=>{const n=a[s];if(!n)return;const o=setTimeout(()=>{let e=0;const a=setInterval(()=>{e<=n.length?(r(a=>({...a,[s]:n.substring(0,e)})),e++):clearInterval(a)},i);t.push(a)},l);e.push(o)}),()=>{e.forEach(e=>clearTimeout(e)),t.forEach(e=>clearInterval(e))}},[a,s,i]),t})(l,n,s.typingSpeed),f=e.useMemo(()=>{return e=i.count,a=i.baseDuration,s=i.durationVariance,Array.from({length:e},(e,i)=>({id:i,startX:100*Math.random(),startY:100+20*Math.random(),endX:100*Math.random(),endY:-10-20*Math.random(),delay:5*Math.random(),duration:a+Math.random()*s,size:1.2+1*Math.random(),wobble:30+40*Math.random()}));var e,a,s},[]),j=e.useMemo(()=>(({count:e,maxDelay:a,baseDuration:s,durationVariance:i})=>Array.from({length:e},(e,t)=>({id:t,x:100*Math.random(),y:100*Math.random(),delay:Math.random()*a,duration:s+Math.random()*i,size:.4+.5*Math.random()})))(t),[]),b=e.useMemo(()=>(({count:e,maxDelay:a,baseDuration:s,durationVariance:i})=>Array.from({length:e},(e,t)=>({id:t,left:100*Math.random(),delay:Math.random()*a,duration:s+Math.random()*i,size:.6+.5*Math.random(),drift:100*Math.random()-50,rotation:360*Math.random()})))(r),[]);e.useEffect(()=>{const e=setTimeout(()=>h(!0),s.floralDelay),a=setTimeout(()=>d(!0),s.butterfliesDelay),i=setTimeout(()=>m(!0),s.sparklesDelay),t=setTimeout(()=>p(!0),300);return()=>{clearTimeout(e),clearTimeout(a),clearTimeout(i),clearTimeout(t)}},[]);const g=e.useCallback(e=>a.jsx("div",{className:"butterfly-flight",style:{"--start-x":`${e.startX}%`,"--start-y":`${e.startY}%`,"--end-x":`${e.endX}%`,"--end-y":`${e.endY}%`,"--delay":`${e.delay}s`,"--duration":`${e.duration}s`,"--wobble":`${e.wobble}px`},children:a.jsx("span",{className:"butterfly-emoji",style:{fontSize:`${e.size}rem`},role:"img","aria-hidden":"true",children:"ü¶ã"})},e.id),[]),N=e.useCallback(e=>a.jsx("div",{className:"garden-sparkle",style:{left:`${e.x}%`,top:`${e.y}%`,animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`,fontSize:`${e.size}rem`},"aria-hidden":"true",children:"‚ú¶"},e.id),[]),v=e.useCallback(e=>a.jsx("div",{className:"falling-petal",style:{left:`${e.left}%`,animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`,"--petal-drift":`${e.drift}px`,"--petal-rotation":`${e.rotation}deg`,fontSize:`${e.size}rem`},"aria-hidden":"true",children:"‚ùÄ"},e.id),[]);return a.jsxs("div",{className:"butterfly-easter-egg-container",role:"article","aria-label":"Easter egg de mariposas",children:[a.jsx("div",{className:"bg-layer bg-gradient"}),a.jsx("div",{className:"bg-layer bg-glow"}),u&&a.jsx("div",{className:"petals-layer","aria-hidden":"true",children:b.map(v)}),c&&a.jsx("div",{className:"sparkles-layer","aria-hidden":"true",children:j.map(N)}),o&&a.jsx("div",{className:"butterflies-layer","aria-hidden":"true",children:f.map(g)}),a.jsxs("div",{className:"butterfly-content "+(y?"revealed":""),children:[a.jsxs("header",{className:"butterfly-header",children:[a.jsxs("div",{className:"date-decoration",children:[a.jsx("span",{className:"decoration-wing",children:"ü¶ã"}),a.jsx("div",{className:"date-circle",children:a.jsx("span",{className:"date-number",children:"1110"})}),a.jsx("span",{className:"decoration-wing decoration-wing-flip",children:"ü¶ã"})]}),a.jsx("p",{className:"date-subtitle",children:"D√≠a de la Mariposa Monarca"})]}),a.jsxs("article",{className:"butterfly-card",children:[a.jsx("div",{className:"card-shimmer"}),a.jsxs("div",{className:"card-inner",children:[a.jsxs("div",{className:"message-section message-intro",children:[a.jsx("p",{className:"message-line italic","aria-live":"polite",children:x.line1}),a.jsx("p",{className:"message-line italic","aria-live":"polite",children:x.line2}),a.jsx("p",{className:"message-line italic","aria-live":"polite",children:x.line3})]}),a.jsx("div",{className:"message-divider",children:a.jsx("span",{className:"divider-butterfly",children:"ü¶ã"})}),a.jsxs("div",{className:"message-section message-main",children:[a.jsx("p",{className:"message-line main-text","aria-live":"polite",children:x.line4}),a.jsx("p",{className:"message-line emphasis-text","aria-live":"polite",children:x.line6})]})]})]}),a.jsxs("footer",{className:"butterfly-footer",children:[a.jsx("span",{className:"footer-symbol",children:"‚úß"}),a.jsx("span",{className:"footer-text",children:"Efecto Mariposa"}),a.jsx("span",{className:"footer-symbol",children:"‚úß"})]})]})]})}export{o as default};
