import{r as e,j as a}from"./three-vendor-DDwscprE.js";import{N as s}from"./NostalgiaIntro-C9a1VzTH.js";import"./react-vendor-D4xGtzmL.js";class n{constructor(e=0,a="Network Error"){this.status=e,this.text=a}}const t={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,a)=>Promise.resolve(localStorage.setItem(e,a)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},i=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},r=async(e,a,s={})=>{const i=await fetch(t.origin+e,{method:"POST",headers:s,body:a}),r=await i.text(),o=new n(i.status,r);if(i.ok)return o;throw o},o=(e,a,s)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!a||"string"!=typeof a)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||"string"!=typeof s)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},l=e=>e.webdriver||!e.languages||0===e.languages.length,c=()=>new n(451,"Unavailable For Headless Browser"),d=(e,a)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,a)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof a)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const s=(n=a,t=e.watchVariable,n instanceof FormData?n.get(t):n[t]);var n,t;return"string"==typeof s&&e.list.includes(s)},m=()=>new n(403,"Forbidden"),h=async(e,a,s)=>{if(!a.throttle||!s)return!1;((e,a)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(a&&"string"!=typeof a)throw"The LimitRate ID has to be a non-empty string"})(a.throttle,a.id);const n=a.id||e,t=await(async(e,a,s)=>{const n=Number(await s.get(e)||0);return a-Date.now()+n})(n,a.throttle,s);return t>0||(await s.set(n,Date.now().toString()),!1)},u=()=>new n(429,"Too Many Requests"),j=async(e,a,s,n)=>{const j=i(n),b=j.publicKey||t.publicKey,p=j.blockHeadless||t.blockHeadless,x=j.storageProvider||t.storageProvider,f={...t.blockList,...j.blockList},N={...t.limitRate,...j.limitRate};if(p&&l(navigator))return Promise.reject(c());if(o(b,e,a),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(s),s&&d(f,s))return Promise.reject(m());if(await h(location.pathname,N,x))return Promise.reject(u());const v={lib_version:"4.4.1",user_id:b,service_id:e,template_id:a,template_params:s};return r("/api/v1.0/email/send",JSON.stringify(v),{"Content-type":"application/json"})},b=["#ffd700","#ffb6c1","#ffa07a","#f8a488","#dda0dd"],p=[{id:"ramen",label:"Sopita Ramen",emoji:"üçú"},{id:"pasta",label:"Cremas/Pasta suave",emoji:"üçù"},{id:"tu-eliges",label:"Lo que t√∫ elijas",emoji:"ü´µ"}],x=[{id:"asiatico",label:"Asi√°tico",emoji:"üç£"},{id:"variado",label:"Variado/Fusi√≥n",emoji:"ü•ò"},{id:"sorpresa",label:"Sorpr√©ndeme",emoji:"‚ú®"}],f=[{id:"low",label:"Pocas",emoji:"üòê"},{id:"medium",label:"Maso",emoji:"üôÇ"},{id:"high",label:"Much√≠simas",emoji:"üòã"}],N=[{label:"Netflix en casa",emoji:"üì∫",color:"#a8d5ba"},{label:"Pedimos algo",emoji:"üõµ",color:"#f9c74f"},{label:"Ma√±ana mejor",emoji:"üìÖ",color:"#90be6d"},{label:"Cena rom√°ntica",emoji:"üç∑",color:"#ff6b6b"},{label:"Solo snacks",emoji:"üçø",color:"#4ecdc4"},{label:"¬°CENA CONTIGO!",emoji:"üíù",color:"#ff9a9e"}],v=[{emoji:"ü•∫",text:"¬øNi siquiera por m√≠?"},{emoji:"üçï",text:"Hay comida rica esper√°ndote..."},{emoji:"üò¢",text:"Pero ya me ba√±√© y todo..."}];function g({onClose:n}){const[t,i]=e.useState(!0),[r,o]=e.useState("health"),[l,c]=e.useState({hasThroatPain:null,excitement:null,foodPreference:null,wasConvinced:!1}),[d,m]=e.useState(!1),[h,u]=e.useState(!1),[g,w]=e.useState(!1),[y,C]=e.useState(0),[k,S]=e.useState(!1),[P,T]=e.useState(0),[q,M]=e.useState(null),_=e.useRef(null),I=e.useMemo(()=>Array.from({length:25},(e,a)=>({id:a,x:100*Math.random(),delay:.8*Math.random(),rotation:720*Math.random()-360,color:b[Math.floor(Math.random()*b.length)]})),[]);e.useEffect(()=>{if("final"===r){const e=setTimeout(()=>u(!0),200);return()=>clearTimeout(e)}},[r]);const V=e.useCallback(async e=>{if(!g)try{await j("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{throat_pain:e.hasThroatPain?"S√≠, le dol√≠a":"No, estaba bien",excitement:"high"===e.excitement?"Much√≠simas ganas":"medium"===e.excitement?"Maso":"Pocas ganas (pero la convenc√≠ üòè)",food_preference:e.foodPreference,was_convinced:e.wasConvinced?"S√≠, tuve que usar la ruleta":"No",timestamp:(new Date).toLocaleString("es-CO",{dateStyle:"full",timeStyle:"short"})},"YOUR_PUBLIC_KEY"),w(!0)}catch(a){}},[g]),L=e.useCallback((e,a=l)=>{m(!0),c(a),setTimeout(()=>{o(e),m(!1),"final"===e&&V(a)},400)},[l,V]),O=e.useCallback(e=>{L("excitement",{...l,hasThroatPain:e})},[l,L]),R=e.useCallback(e=>{const a={...l,excitement:e};L("low"===e?"convince":"food",a)},[l,L]),D=e.useCallback(e=>{e?L("food",{...l,wasConvinced:!0}):y<v.length-1?C(e=>e+1):L("wheel",{...l,wasConvinced:!0})},[l,y,L]),A=e.useCallback(()=>{if(k)return;S(!0),M(null);const e=N.length,a=e-1,s=360/e,n=1800+(360-a*s-s/2)+10*Math.random()-5;T(e=>e+n),setTimeout(()=>{S(!1),M(N[a])},4e3)},[k]),E=e.useCallback(()=>{L("food",{...l,wasConvinced:!0})},[l,L]),$=e.useCallback(e=>{L("final",{...l,foodPreference:e})},[l,L]),Y=e.useCallback(()=>{n&&n()},[n]),B="health"===r?1:"excitement"===r||"convince"===r||"wheel"===r?2:"food"===r?3:"final"===r?4:1;return t?a.jsx(s,{onContinue:()=>i(!1)}):a.jsxs("div",{className:"dinner-easter-egg-container",role:"dialog","aria-label":"Invitaci√≥n a cenar",children:[a.jsx("button",{className:"dinner-close-btn",onClick:Y,"aria-label":"Cerrar",children:"‚úï"}),h&&a.jsx("div",{className:"dinner-confetti-container","aria-hidden":"true",children:I.map(e=>a.jsx("span",{className:"dinner-confetti",style:{left:`${e.x}%`,animationDelay:`${e.delay}s`,backgroundColor:e.color,"--rotation":`${e.rotation}deg`}},e.id))}),a.jsx("div",{className:"dinner-progress","aria-label":`Paso ${B} de 4`,children:[1,2,3,4].map(e=>a.jsx("div",{className:`dinner-progress-dot ${e===B?"active":""} ${e<B?"completed":""}`},e))}),a.jsx("div",{className:"dinner-content",children:(()=>{switch(r){case"health":return a.jsxs("div",{className:"dinner-step "+(d?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"ü•∫"}),a.jsx("h2",{className:"dinner-question",children:"¬øA√∫n tienes dolor de am√≠gdalas, Pau?"}),a.jsxs("div",{className:"dinner-options",children:[a.jsxs("button",{className:"dinner-btn dinner-btn-soft",onClick:()=>O(!0),children:[a.jsx("span",{className:"btn-emoji",children:"üòø"}),a.jsx("span",{className:"btn-text",children:"S√≠, un poquito"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-happy",onClick:()=>O(!1),children:[a.jsx("span",{className:"btn-emoji",children:"üéâ"}),a.jsx("span",{className:"btn-text",children:"Ya no, estoy s√∫per!"})]})]})]});case"excitement":return a.jsxs("div",{className:"dinner-step "+(d?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"üçΩÔ∏è"}),a.jsx("h2",{className:"dinner-question",children:"¬øQu√© tantas ganas tienes de salir a comer rico hoy?"}),a.jsx("div",{className:"dinner-options dinner-options-excitement",children:f.map(e=>a.jsxs("button",{className:"dinner-btn dinner-btn-excitement",onClick:()=>R(e.id),children:[a.jsx("span",{className:"btn-emoji-large",children:e.emoji}),a.jsx("span",{className:"btn-text",children:e.label})]},e.id))})]});case"convince":return(()=>{const e=v[y];return a.jsxs("div",{className:"dinner-step dinner-step-convince "+(d?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header dinner-emoji-bounce",children:e.emoji}),a.jsx("h2",{className:"dinner-question",children:e.text}),a.jsxs("div",{className:"dinner-options",children:[a.jsxs("button",{className:"dinner-btn dinner-btn-happy",onClick:()=>D(!0),children:[a.jsx("span",{className:"btn-emoji",children:"üòä"}),a.jsx("span",{className:"btn-text",children:"Bueno, ya me convenciste"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-soft",onClick:()=>D(!1),children:[a.jsx("span",{className:"btn-emoji",children:"üòÖ"}),a.jsx("span",{className:"btn-text",children:"Sigo sin ganas..."})]})]}),a.jsx("div",{className:"convince-counter",children:v.map((e,s)=>a.jsx("span",{className:"convince-dot "+(s<=y?"active":"")},s))})]})})();case"wheel":return a.jsxs("div",{className:"dinner-step dinner-step-wheel "+(d?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"üé∞"}),a.jsx("h2",{className:"dinner-question",children:q?"¬°Y el destino ha hablado!":"Ok, dejemos que el destino decida..."}),a.jsxs("div",{className:"wheel-container",children:[a.jsx("div",{className:"wheel-pointer",children:"‚ñº"}),a.jsx("div",{ref:_,className:"wheel "+(k?"spinning":""),style:{transform:`rotate(${P}deg)`},children:N.map((e,s)=>{const n=360/N.length*s;return a.jsx("div",{className:"wheel-segment",style:{"--rotation":`${n}deg`,"--color":e.color},children:a.jsx("span",{className:"wheel-segment-content",children:a.jsx("span",{className:"wheel-emoji",children:e.emoji})})},s)})})]}),q?a.jsxs("div",{className:"wheel-result",children:[a.jsxs("div",{className:"wheel-result-content",children:[a.jsx("span",{className:"wheel-result-emoji",children:q.emoji}),a.jsx("span",{className:"wheel-result-text",children:q.label})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-happy",onClick:E,children:[a.jsx("span",{className:"btn-emoji",children:"üéâ"}),a.jsx("span",{className:"btn-text",children:"¬°Acepto mi destino!"})]})]}):a.jsxs("button",{className:"dinner-btn dinner-btn-spin",onClick:A,disabled:k,children:[a.jsx("span",{className:"btn-emoji",children:k?"üé≤":"üéØ"}),a.jsx("span",{className:"btn-text",children:k?"Girando...":"¬°Girar la ruleta!"})]})]});case"food":return(()=>{const e=l.hasThroatPain?p:x,s=l.hasThroatPain?"Vamos por algo suavecito...":"¬øQu√© se te antoja?";return a.jsxs("div",{className:"dinner-step "+(d?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:l.hasThroatPain?"ü§ó":"ü§î"}),a.jsx("h2",{className:"dinner-question",children:s}),a.jsx("div",{className:"dinner-options dinner-options-food",children:e.map(e=>a.jsxs("button",{className:"dinner-btn dinner-btn-food",onClick:()=>$(e.label),children:[a.jsx("span",{className:"btn-emoji-large",children:e.emoji}),a.jsx("span",{className:"btn-text",children:e.label})]},e.id))})]})})();case"final":return a.jsxs("div",{className:"dinner-step dinner-step-final "+(d?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-final-icon",children:"‚ú®üçΩÔ∏è‚ú®"}),a.jsxs("div",{className:"dinner-final-message",children:[a.jsxs("p",{className:"dinner-final-text",children:["Pau, paso por ti a las ",a.jsx("strong",{children:"6:30pm"}),"."]}),a.jsx("p",{className:"dinner-final-text dinner-final-subtext",children:"V√≠stete normal y tranqui, como sea est√°s divina"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-final",onClick:Y,children:[a.jsx("span",{className:"btn-emoji",children:"üíå"}),a.jsx("span",{className:"btn-text",children:"¬°Listo, nos vemos!"})]})]});default:return null}})()})]})}export{g as default};
