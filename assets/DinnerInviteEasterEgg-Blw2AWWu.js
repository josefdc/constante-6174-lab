import{r as e,j as a}from"./three-vendor--4Ld4C0w.js";import"./react-vendor-DZJm6EwP.js";class n{constructor(e=0,a="Network Error"){this.status=e,this.text=a}}const s={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,a)=>Promise.resolve(localStorage.setItem(e,a)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},t=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},i=async(e,a,t={})=>{const i=await fetch(s.origin+e,{method:"POST",headers:t,body:a}),r=await i.text(),o=new n(i.status,r);if(i.ok)return o;throw o},r=(e,a,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!a||"string"!=typeof a)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},o=e=>e.webdriver||!e.languages||0===e.languages.length,l=()=>new n(451,"Unavailable For Headless Browser"),c=(e,a)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,a)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof a)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(s=a,t=e.watchVariable,s instanceof FormData?s.get(t):s[t]);var s,t;return"string"==typeof n&&e.list.includes(n)},d=()=>new n(403,"Forbidden"),m=async(e,a,n)=>{if(!a.throttle||!n)return!1;((e,a)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(a&&"string"!=typeof a)throw"The LimitRate ID has to be a non-empty string"})(a.throttle,a.id);const s=a.id||e,t=await(async(e,a,n)=>{const s=Number(await n.get(e)||0);return a-Date.now()+s})(s,a.throttle,n);return t>0||(await n.set(s,Date.now().toString()),!1)},h=()=>new n(429,"Too Many Requests"),u=async(e,a,n,u)=>{const j=t(u),b=j.publicKey||s.publicKey,p=j.blockHeadless||s.blockHeadless,x=j.storageProvider||s.storageProvider,f={...s.blockList,...j.blockList},N={...s.limitRate,...j.limitRate};if(p&&o(navigator))return Promise.reject(l());if(r(b,e,a),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&c(f,n))return Promise.reject(d());if(await m(location.pathname,N,x))return Promise.reject(h());const v={lib_version:"4.4.1",user_id:b,service_id:e,template_id:a,template_params:n};return i("/api/v1.0/email/send",JSON.stringify(v),{"Content-type":"application/json"})},j=["#ffd700","#ffb6c1","#ffa07a","#f8a488","#dda0dd"],b=[{id:"ramen",label:"Sopita Ramen",emoji:"üçú"},{id:"pasta",label:"Cremas/Pasta suave",emoji:"üçù"},{id:"tu-eliges",label:"Lo que t√∫ elijas",emoji:"ü´µ"}],p=[{id:"asiatico",label:"Asi√°tico",emoji:"üç£"},{id:"variado",label:"Variado/Fusi√≥n",emoji:"ü•ò"},{id:"sorpresa",label:"Sorpr√©ndeme",emoji:"‚ú®"}],x=[{id:"low",label:"Pocas",emoji:"üòê"},{id:"medium",label:"Maso",emoji:"üôÇ"},{id:"high",label:"Much√≠simas",emoji:"üòã"}],f=[{label:"Netflix en casa",emoji:"üì∫",color:"#a8d5ba"},{label:"Pedimos algo",emoji:"üõµ",color:"#f9c74f"},{label:"Ma√±ana mejor",emoji:"üìÖ",color:"#90be6d"},{label:"Cena rom√°ntica",emoji:"üç∑",color:"#ff6b6b"},{label:"Solo snacks",emoji:"üçø",color:"#4ecdc4"},{label:"¬°CENA CONTIGO!",emoji:"üíù",color:"#ff9a9e"}],N=[{emoji:"ü•∫",text:"¬øNi siquiera por m√≠?"},{emoji:"üçï",text:"Hay comida rica esper√°ndote..."},{emoji:"üò¢",text:"Pero ya me ba√±√© y todo..."}];function v({onClose:n}){const[s,t]=e.useState("health"),[i,r]=e.useState({hasThroatPain:null,excitement:null,foodPreference:null,wasConvinced:!1}),[o,l]=e.useState(!1),[c,d]=e.useState(!1),[m,h]=e.useState(!1),[v,g]=e.useState(0),[w,y]=e.useState(!1),[C,k]=e.useState(0),[P,S]=e.useState(null),T=e.useRef(null),q=e.useMemo(()=>Array.from({length:15},(e,a)=>({id:a,x:100*Math.random(),delay:.8*Math.random(),rotation:720*Math.random()-360,color:j[Math.floor(Math.random()*j.length)]})),[]);e.useEffect(()=>{if("final"===s){const e=setTimeout(()=>d(!0),200);return()=>clearTimeout(e)}},[s]);const M=e.useCallback(async e=>{if(!m)try{await u("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{throat_pain:e.hasThroatPain?"S√≠, le dol√≠a":"No, estaba bien",excitement:"high"===e.excitement?"Much√≠simas ganas":"medium"===e.excitement?"Maso":"Pocas ganas (pero la convenc√≠ üòè)",food_preference:e.foodPreference,was_convinced:e.wasConvinced?"S√≠, tuve que usar la ruleta":"No",timestamp:(new Date).toLocaleString("es-CO",{dateStyle:"full",timeStyle:"short"})},"YOUR_PUBLIC_KEY"),h(!0)}catch(a){}},[m]),_=e.useCallback((e,a=i)=>{l(!0),r(a),setTimeout(()=>{t(e),l(!1),"final"===e&&M(a)},400)},[i,M]),I=e.useCallback(e=>{_("excitement",{...i,hasThroatPain:e})},[i,_]),V=e.useCallback(e=>{const a={...i,excitement:e};_("low"===e?"convince":"food",a)},[i,_]),L=e.useCallback(e=>{e?_("food",{...i,wasConvinced:!0}):v<N.length-1?g(e=>e+1):_("wheel",{...i,wasConvinced:!0})},[i,v,_]),O=e.useCallback(()=>{if(w)return;y(!0),S(null);const e=f.length,a=e-1,n=360/e,s=1800+(360-a*n-n/2)+10*Math.random()-5;k(e=>e+s),setTimeout(()=>{y(!1),S(f[a])},4e3)},[w]),R=e.useCallback(()=>{_("food",{...i,wasConvinced:!0})},[i,_]),D=e.useCallback(e=>{_("final",{...i,foodPreference:e})},[i,_]),A=e.useCallback(()=>{n&&n()},[n]),E="health"===s?1:"excitement"===s||"convince"===s||"wheel"===s?2:"food"===s?3:"final"===s?4:1;return a.jsxs("div",{className:"dinner-easter-egg-container",role:"dialog","aria-label":"Invitaci√≥n a cenar",children:[a.jsx("button",{className:"dinner-close-btn",onClick:A,"aria-label":"Cerrar",children:"‚úï"}),c&&a.jsx("div",{className:"dinner-confetti-container","aria-hidden":"true",children:q.map(e=>a.jsx("span",{className:"dinner-confetti",style:{left:`${e.x}%`,animationDelay:`${e.delay}s`,backgroundColor:e.color,"--rotation":`${e.rotation}deg`}},e.id))}),a.jsx("div",{className:"dinner-progress","aria-label":`Paso ${E} de 4`,children:[1,2,3,4].map(e=>a.jsx("div",{className:`dinner-progress-dot ${e===E?"active":""} ${e<E?"completed":""}`},e))}),a.jsx("div",{className:"dinner-content",children:(()=>{switch(s){case"health":return a.jsxs("div",{className:"dinner-step "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"ü•∫"}),a.jsx("h2",{className:"dinner-question",children:"¬øA√∫n tienes dolor de am√≠gdalas, Pau?"}),a.jsxs("div",{className:"dinner-options",children:[a.jsxs("button",{className:"dinner-btn dinner-btn-soft",onClick:()=>I(!0),children:[a.jsx("span",{className:"btn-emoji",children:"üòø"}),a.jsx("span",{className:"btn-text",children:"S√≠, un poquito"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-happy",onClick:()=>I(!1),children:[a.jsx("span",{className:"btn-emoji",children:"üéâ"}),a.jsx("span",{className:"btn-text",children:"Ya no, estoy s√∫per!"})]})]})]});case"excitement":return a.jsxs("div",{className:"dinner-step "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"üçΩÔ∏è"}),a.jsx("h2",{className:"dinner-question",children:"¬øQu√© tantas ganas tienes de salir a comer rico hoy?"}),a.jsx("div",{className:"dinner-options dinner-options-excitement",children:x.map(e=>a.jsxs("button",{className:"dinner-btn dinner-btn-excitement",onClick:()=>V(e.id),children:[a.jsx("span",{className:"btn-emoji-large",children:e.emoji}),a.jsx("span",{className:"btn-text",children:e.label})]},e.id))})]});case"convince":return(()=>{const e=N[v];return a.jsxs("div",{className:"dinner-step dinner-step-convince "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header dinner-emoji-bounce",children:e.emoji}),a.jsx("h2",{className:"dinner-question",children:e.text}),a.jsxs("div",{className:"dinner-options",children:[a.jsxs("button",{className:"dinner-btn dinner-btn-happy",onClick:()=>L(!0),children:[a.jsx("span",{className:"btn-emoji",children:"üòä"}),a.jsx("span",{className:"btn-text",children:"Bueno, ya me convenciste"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-soft",onClick:()=>L(!1),children:[a.jsx("span",{className:"btn-emoji",children:"üòÖ"}),a.jsx("span",{className:"btn-text",children:"Sigo sin ganas..."})]})]}),a.jsx("div",{className:"convince-counter",children:N.map((e,n)=>a.jsx("span",{className:"convince-dot "+(n<=v?"active":"")},n))})]})})();case"wheel":return a.jsxs("div",{className:"dinner-step dinner-step-wheel "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"üé∞"}),a.jsx("h2",{className:"dinner-question",children:P?"¬°Y el destino ha hablado!":"Ok, dejemos que el destino decida..."}),a.jsxs("div",{className:"wheel-container",children:[a.jsx("div",{className:"wheel-pointer",children:"‚ñº"}),a.jsx("div",{ref:T,className:"wheel "+(w?"spinning":""),style:{transform:`rotate(${C}deg)`},children:f.map((e,n)=>{const s=360/f.length*n;return a.jsx("div",{className:"wheel-segment",style:{"--rotation":`${s}deg`,"--color":e.color},children:a.jsx("span",{className:"wheel-segment-content",children:a.jsx("span",{className:"wheel-emoji",children:e.emoji})})},n)})})]}),P?a.jsxs("div",{className:"wheel-result",children:[a.jsxs("div",{className:"wheel-result-content",children:[a.jsx("span",{className:"wheel-result-emoji",children:P.emoji}),a.jsx("span",{className:"wheel-result-text",children:P.label})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-happy",onClick:R,children:[a.jsx("span",{className:"btn-emoji",children:"üéâ"}),a.jsx("span",{className:"btn-text",children:"¬°Acepto mi destino!"})]})]}):a.jsxs("button",{className:"dinner-btn dinner-btn-spin",onClick:O,disabled:w,children:[a.jsx("span",{className:"btn-emoji",children:w?"üé≤":"üéØ"}),a.jsx("span",{className:"btn-text",children:w?"Girando...":"¬°Girar la ruleta!"})]})]});case"food":return(()=>{const e=i.hasThroatPain?b:p,n=i.hasThroatPain?"Vamos por algo suavecito...":"¬øQu√© se te antoja?";return a.jsxs("div",{className:"dinner-step "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:i.hasThroatPain?"ü§ó":"ü§î"}),a.jsx("h2",{className:"dinner-question",children:n}),a.jsx("div",{className:"dinner-options dinner-options-food",children:e.map(e=>a.jsxs("button",{className:"dinner-btn dinner-btn-food",onClick:()=>D(e.label),children:[a.jsx("span",{className:"btn-emoji-large",children:e.emoji}),a.jsx("span",{className:"btn-text",children:e.label})]},e.id))})]})})();case"final":return a.jsxs("div",{className:"dinner-step dinner-step-final "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-final-icon",children:"‚ú®üçΩÔ∏è‚ú®"}),a.jsxs("div",{className:"dinner-final-message",children:[a.jsxs("p",{className:"dinner-final-text",children:["Pau, paso por ti a las ",a.jsx("strong",{children:"6:30pm"}),"."]}),a.jsx("p",{className:"dinner-final-text dinner-final-subtext",children:"V√≠stete normal y tranqui, como sea est√°s divina"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-final",onClick:A,children:[a.jsx("span",{className:"btn-emoji",children:"üíå"}),a.jsx("span",{className:"btn-text",children:"¬°Listo, nos vemos!"})]})]});default:return null}})()})]})}export{v as default};
