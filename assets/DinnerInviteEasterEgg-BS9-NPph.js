import{r as e,j as a}from"./three-vendor-DDwscprE.js";import"./react-vendor-D4xGtzmL.js";class t{constructor(e=0,a="Network Error"){this.status=e,this.text=a}}const s={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,a)=>Promise.resolve(localStorage.setItem(e,a)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},i=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},n=async(e,a,i={})=>{const n=await fetch(s.origin+e,{method:"POST",headers:i,body:a}),r=await n.text(),o=new t(n.status,r);if(n.ok)return o;throw o},r=(e,a,t)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!a||"string"!=typeof a)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||"string"!=typeof t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},o=e=>e.webdriver||!e.languages||0===e.languages.length,l=()=>new t(451,"Unavailable For Headless Browser"),c=(e,a)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,a)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof a)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const t=(s=a,i=e.watchVariable,s instanceof FormData?s.get(i):s[i]);var s,i;return"string"==typeof t&&e.list.includes(t)},d=()=>new t(403,"Forbidden"),m=async(e,a,t)=>{if(!a.throttle||!t)return!1;((e,a)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(a&&"string"!=typeof a)throw"The LimitRate ID has to be a non-empty string"})(a.throttle,a.id);const s=a.id||e,i=await(async(e,a,t)=>{const s=Number(await t.get(e)||0);return a-Date.now()+s})(s,a.throttle,t);return i>0||(await t.set(s,Date.now().toString()),!1)},h=()=>new t(429,"Too Many Requests"),u=async(e,a,t,u)=>{const b=i(u),p=b.publicKey||s.publicKey,j=b.blockHeadless||s.blockHeadless,f=b.storageProvider||s.storageProvider,x={...s.blockList,...b.blockList},g={...s.limitRate,...b.limitRate};if(j&&o(navigator))return Promise.reject(l());if(r(p,e,a),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(t),t&&c(x,t))return Promise.reject(d());if(await m(location.pathname,g,f))return Promise.reject(h());const v={lib_version:"4.4.1",user_id:p,service_id:e,template_id:a,template_params:t};return n("/api/v1.0/email/send",JSON.stringify(v),{"Content-type":"application/json"})},b=["#ffd700","#ffb6c1","#ffa07a","#f8a488","#dda0dd"],p=[{id:"ramen",label:"Sopita Ramen",emoji:"ğŸœ"},{id:"pasta",label:"Cremas/Pasta suave",emoji:"ğŸ"},{id:"tu-eliges",label:"Lo que tÃº elijas",emoji:"ğŸ«µ"}],j=[{id:"asiatico",label:"AsiÃ¡tico",emoji:"ğŸ£"},{id:"variado",label:"Variado/FusiÃ³n",emoji:"ğŸ¥˜"},{id:"sorpresa",label:"SorprÃ©ndeme",emoji:"âœ¨"}],f=[{id:"low",label:"Pocas",emoji:"ğŸ˜"},{id:"medium",label:"Maso",emoji:"ğŸ™‚"},{id:"high",label:"MuchÃ­simas",emoji:"ğŸ˜‹"}];function x({onClose:t}){const[s,i]=e.useState(1),[n,r]=e.useState({hasThroatPain:null,excitement:null,foodPreference:null}),[o,l]=e.useState(!1),[c,d]=e.useState(!1),[m,h]=e.useState(!1),x=e.useMemo(()=>Array.from({length:25},(e,a)=>({id:a,x:100*Math.random(),delay:.8*Math.random(),rotation:720*Math.random()-360,color:b[Math.floor(Math.random()*b.length)]})),[]);e.useEffect(()=>{if(4===s){const e=setTimeout(()=>d(!0),200);return()=>clearTimeout(e)}},[s]);const g=e.useCallback(async e=>{if(!m)try{await u("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{throat_pain:e.hasThroatPain?"SÃ­, le dolÃ­a":"No, estaba bien",excitement:"high"===e.excitement?"MuchÃ­simas ganas":"medium"===e.excitement?"Maso":"Pocas ganas",food_preference:e.foodPreference,timestamp:(new Date).toLocaleString("es-CO",{dateStyle:"full",timeStyle:"short"})},"YOUR_PUBLIC_KEY"),h(!0)}catch(a){}},[m]),v=e.useCallback(e=>{l(!0),r(e),setTimeout(()=>{i(e=>e+1),l(!1),3===s&&g(e)},400)},[s,g]),N=e.useCallback(e=>{v({...n,hasThroatPain:e})},[n,v]),y=e.useCallback(e=>{v({...n,excitement:e})},[n,v]),w=e.useCallback(e=>{v({...n,foodPreference:e})},[n,v]),P=e.useCallback(()=>{t&&t()},[t]),k=e.useCallback(()=>a.jsx("div",{className:"dinner-confetti-container","aria-hidden":"true",children:x.map(e=>a.jsx("span",{className:"dinner-confetti",style:{left:`${e.x}%`,animationDelay:`${e.delay}s`,backgroundColor:e.color,"--rotation":`${e.rotation}deg`}},e.id))}),[x]);return a.jsxs("div",{className:"dinner-easter-egg-container",role:"dialog","aria-label":"InvitaciÃ³n a cenar",children:[a.jsx("button",{className:"dinner-close-btn",onClick:P,"aria-label":"Cerrar",children:"âœ•"}),c&&k(),a.jsx("div",{className:"dinner-progress","aria-label":`Paso ${s} de 4`,children:[1,2,3,4].map(e=>a.jsx("div",{className:`dinner-progress-dot ${e===s?"active":""} ${e<s?"completed":""}`},e))}),a.jsx("div",{className:"dinner-content",children:(()=>{switch(s){case 1:return a.jsxs("div",{className:"dinner-step "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"ğŸ¥º"}),a.jsx("h2",{className:"dinner-question",children:"Â¿AÃºn tienes dolor de amÃ­gdalas, Pau?"}),a.jsxs("div",{className:"dinner-options",children:[a.jsxs("button",{className:"dinner-btn dinner-btn-soft",onClick:()=>N(!0),children:[a.jsx("span",{className:"btn-emoji",children:"ğŸ˜¿"}),a.jsx("span",{className:"btn-text",children:"SÃ­, un poquito"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-happy",onClick:()=>N(!1),children:[a.jsx("span",{className:"btn-emoji",children:"ğŸ‰"}),a.jsx("span",{className:"btn-text",children:"Ya no, estoy sÃºper!"})]})]})]});case 2:return a.jsxs("div",{className:"dinner-step "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:"ğŸ½ï¸"}),a.jsx("h2",{className:"dinner-question",children:"Â¿QuÃ© tantas ganas tienes de salir a comer rico hoy?"}),a.jsx("div",{className:"dinner-options dinner-options-excitement",children:f.map(e=>a.jsxs("button",{className:"dinner-btn dinner-btn-excitement",onClick:()=>y(e.id),children:[a.jsx("span",{className:"btn-emoji-large",children:e.emoji}),a.jsx("span",{className:"btn-text",children:e.label})]},e.id))})]});case 3:return(()=>{const e=n.hasThroatPain?p:j,t=n.hasThroatPain?"Vamos por algo suavecito...":"Â¿QuÃ© se te antoja?";return a.jsxs("div",{className:"dinner-step "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-emoji-header",children:n.hasThroatPain?"ğŸ¤—":"ğŸ¤”"}),a.jsx("h2",{className:"dinner-question",children:t}),a.jsx("div",{className:"dinner-options dinner-options-food",children:e.map(e=>a.jsxs("button",{className:"dinner-btn dinner-btn-food",onClick:()=>w(e.label),children:[a.jsx("span",{className:"btn-emoji-large",children:e.emoji}),a.jsx("span",{className:"btn-text",children:e.label})]},e.id))})]})})();case 4:return a.jsxs("div",{className:"dinner-step dinner-step-final "+(o?"fade-out":"fade-in"),children:[a.jsx("div",{className:"dinner-final-icon",children:"âœ¨ğŸ½ï¸âœ¨"}),a.jsxs("div",{className:"dinner-final-message",children:[a.jsxs("p",{className:"dinner-final-text",children:["Pau, paso por ti a las ",a.jsx("strong",{children:"6:30pm"}),"."]}),a.jsx("p",{className:"dinner-final-text dinner-final-subtext",children:"VÃ­stete normal y tranqui, como sea estÃ¡s divina"})]}),a.jsxs("button",{className:"dinner-btn dinner-btn-final",onClick:P,children:[a.jsx("span",{className:"btn-emoji",children:"ğŸ’Œ"}),a.jsx("span",{className:"btn-text",children:"Â¡Listo, nos vemos!"})]})]});default:return null}})()})]})}export{x as default};
