import{j as e,C as s,P as r,E as a,O as l,a as t,r as i,u as o,F as n,V as d,B as c,b as u}from"./three-vendor-DDwscprE.js";import{S as m,R as h,X as x,L as g}from"./icons-vendor-CL1Owb0D.js";import"./react-vendor-D4xGtzmL.js";function p({theme:s,geometry:r}){const a=i.useRef(null),l=i.useRef(null);o((e,r)=>{a.current&&(a.current.rotation.x+=.2*r*s.animationSpeed,a.current.rotation.y+=.3*r*s.animationSpeed),l.current&&a.current&&(l.current.rotation.x=a.current.rotation.x,l.current.rotation.y=a.current.rotation.y)});const t=i.useMemo(()=>(({radius:e,tube:s,radialSegments:r,tubularSegments:a,arc:l,twist:t})=>{const i=[],o=[],n=[],m=new d;for(let d=0;d<=a;d++){const o=d/a*l,c=o*t;for(let l=0;l<=r;l++){const t=l/r*Math.PI*2+c,u=e+s*Math.cos(t);m.x=u*Math.cos(o),m.y=u*Math.sin(o),m.z=s*Math.sin(t),i.push(m.x,m.y,m.z),n.push(d/a),n.push(l/r)}}for(let d=1;d<=a;d++)for(let e=1;e<=r;e++){const s=(r+1)*d+e-1,a=(r+1)*(d-1)+e-1,l=(r+1)*(d-1)+e,t=(r+1)*d+e;o.push(s,a,t),o.push(a,l,t)}const h=new c;return h.setIndex(o),h.setAttribute("position",new u(i,3)),h.setAttribute("uv",new u(n,2)),h.computeVertexNormals(),h})(r),[r]);return e.jsx("group",{children:e.jsxs(n,{speed:2,rotationIntensity:.5,floatIntensity:1,children:[e.jsx("mesh",{ref:a,geometry:t,children:e.jsx("meshStandardMaterial",{color:s.meshColor,roughness:s.roughness,metalness:s.metalness,emissive:s.emissive,emissiveIntensity:.2,flatShading:!0})}),e.jsx("mesh",{ref:l,geometry:t,scale:[1.001,1.001,1.001],children:e.jsx("meshBasicMaterial",{color:s.wireframeColor,wireframe:!0,transparent:!0,opacity:.3})})]})})}function j({theme:i,geometry:o}){return e.jsxs(s,{children:[e.jsx(r,{makeDefault:!0,position:[0,0,35],fov:50}),e.jsx("color",{attach:"background",args:[i.backgroundColor]}),e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[20,20,20],intensity:1,color:"#ffffff"}),e.jsx("pointLight",{position:[-20,-10,-10],intensity:.5,color:i.meshColor}),e.jsx("spotLight",{position:[0,50,0],angle:.3,penumbra:1,intensity:2,castShadow:!0}),e.jsx(a,{preset:"city"}),e.jsx(p,{theme:i,geometry:o}),e.jsx(l,{enablePan:!1,maxDistance:100,minDistance:10}),e.jsx(t,{position:[0,-15,0],opacity:.6,scale:40,blur:2,far:10,resolution:256,color:"#000000"})]})}const b=[{name:"Ãndigo",meshColor:"#4f46e5",backgroundColor:"#030712"},{name:"Esmeralda",meshColor:"#10b981",backgroundColor:"#022c22"},{name:"Rosa",meshColor:"#ec4899",backgroundColor:"#1a0a14"},{name:"Dorado",meshColor:"#f59e0b",backgroundColor:"#1c1002"},{name:"Cian",meshColor:"#06b6d4",backgroundColor:"#021a1f"}],v={radius:9,tube:3.5,radialSegments:4,tubularSegments:24,arc:2*Math.PI,twist:.5},C={meshColor:"#4f46e5",backgroundColor:"#030712",metalness:.8,roughness:.1};function y({currentTheme:s,onThemeChange:r,currentGeometry:a,onGeometryChange:l}){const t=(e,s)=>{l({...a,[e]:s})};return e.jsxs("div",{className:"ui-controls",role:"region","aria-label":"Controles del visualizador",children:[e.jsxs("div",{className:"ui-header",children:[e.jsxs("div",{className:"ui-header-title",children:[e.jsx(m,{size:18,"aria-hidden":"true"}),e.jsx("span",{children:"Controles"})]}),e.jsx("button",{onClick:()=>{l(v),r({...s,...C})},className:"ui-reset-btn","aria-label":"Restablecer valores predeterminados",title:"Restablecer",children:e.jsx(h,{size:16,"aria-hidden":"true"})})]}),e.jsxs("div",{className:"ui-content",children:[e.jsxs("section",{className:"ui-section","aria-labelledby":"presets-title",children:[e.jsx("h3",{id:"presets-title",className:"ui-label",children:"Temas"}),e.jsx("div",{className:"ui-presets",children:b.map(a=>e.jsx("button",{onClick:()=>(e=>{r({...s,meshColor:e.meshColor,backgroundColor:e.backgroundColor})})(a),className:"ui-preset-btn",style:{background:a.meshColor},"aria-label":`Aplicar tema ${a.name}`,title:a.name},a.name))})]}),e.jsxs("section",{className:"ui-section","aria-labelledby":"colors-title",children:[e.jsx("h3",{id:"colors-title",className:"ui-label",children:"Colores"}),e.jsxs("div",{className:"ui-color-grid",children:[e.jsxs("div",{className:"ui-color-item",children:[e.jsx("label",{htmlFor:"mesh-color",children:"Objeto"}),e.jsx("input",{id:"mesh-color",type:"color",value:s.meshColor,onChange:e=>r({...s,meshColor:e.target.value})})]}),e.jsxs("div",{className:"ui-color-item",children:[e.jsx("label",{htmlFor:"bg-color",children:"Fondo"}),e.jsx("input",{id:"bg-color",type:"color",value:s.backgroundColor,onChange:e=>r({...s,backgroundColor:e.target.value})})]})]})]}),e.jsxs("section",{className:"ui-section","aria-labelledby":"material-title",children:[e.jsx("h3",{id:"material-title",className:"ui-label",children:"Material"}),e.jsxs("div",{className:"ui-slider-group",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"metalness-slider",children:"Brillo metÃ¡lico"}),e.jsxs("output",{htmlFor:"metalness-slider",children:[(100*s.metalness).toFixed(0),"%"]})]}),e.jsx("input",{id:"metalness-slider",type:"range",min:"0",max:"1",step:"0.01",value:s.metalness,onChange:e=>r({...s,metalness:parseFloat(e.target.value)})})]}),e.jsxs("div",{className:"ui-slider-group",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"roughness-slider",children:"Rugosidad"}),e.jsxs("output",{htmlFor:"roughness-slider",children:[(100*s.roughness).toFixed(0),"%"]})]}),e.jsx("input",{id:"roughness-slider",type:"range",min:"0",max:"1",step:"0.01",value:s.roughness,onChange:e=>r({...s,roughness:parseFloat(e.target.value)})})]})]}),e.jsx("div",{className:"ui-divider",role:"separator"}),e.jsxs("section",{className:"ui-section","aria-labelledby":"geometry-title",children:[e.jsx("h3",{id:"geometry-title",className:"ui-label",children:"GeometrÃ­a"}),e.jsxs("div",{className:"ui-slider-group highlight",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"twist-slider",children:"ðŸ”„ TorsiÃ³n"}),e.jsx("output",{htmlFor:"twist-slider",children:a.twist.toFixed(1)})]}),e.jsx("input",{id:"twist-slider",type:"range",min:"-2",max:"2",step:"0.1",value:a.twist,onChange:e=>t("twist",parseFloat(e.target.value))})]}),e.jsxs("div",{className:"ui-slider-group",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"radius-slider",children:"Radio mayor"}),e.jsx("output",{htmlFor:"radius-slider",children:a.radius})]}),e.jsx("input",{id:"radius-slider",type:"range",min:"2",max:"15",step:"0.5",value:a.radius,onChange:e=>t("radius",parseFloat(e.target.value))})]}),e.jsxs("div",{className:"ui-slider-group",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"tube-slider",children:"Radio del tubo"}),e.jsx("output",{htmlFor:"tube-slider",children:a.tube})]}),e.jsx("input",{id:"tube-slider",type:"range",min:"1",max:"8",step:"0.5",value:a.tube,onChange:e=>t("tube",parseFloat(e.target.value))})]}),e.jsxs("div",{className:"ui-slider-group",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"radial-slider",children:"Lados"}),e.jsx("output",{htmlFor:"radial-slider",children:a.radialSegments})]}),e.jsx("input",{id:"radial-slider",type:"range",min:"3",max:"30",step:"1",value:a.radialSegments,onChange:e=>t("radialSegments",parseInt(e.target.value))}),e.jsx("p",{className:"ui-hint",children:"3 = triÃ¡ngulo, 4 = cuadrado"})]}),e.jsxs("div",{className:"ui-slider-group",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"tubular-slider",children:"Segmentos"}),e.jsx("output",{htmlFor:"tubular-slider",children:a.tubularSegments})]}),e.jsx("input",{id:"tubular-slider",type:"range",min:"3",max:"100",step:"1",value:a.tubularSegments,onChange:e=>t("tubularSegments",parseInt(e.target.value))})]}),e.jsxs("div",{className:"ui-slider-group",children:[e.jsxs("div",{className:"ui-slider-header",children:[e.jsx("label",{htmlFor:"arc-slider",children:"Arco"}),e.jsxs("output",{htmlFor:"arc-slider",children:[(a.arc*(180/Math.PI)).toFixed(0),"Â°"]})]}),e.jsx("input",{id:"arc-slider",type:"range",min:"0.1",max:2*Math.PI,step:"0.1",value:a.arc,onChange:e=>t("arc",parseFloat(e.target.value))})]})]})]})]})}const N={meshColor:"#4f46e5",wireframeColor:"#ffffff",backgroundColor:"#030712",roughness:.1,metalness:.8,emissive:"#000000",animationSpeed:1},f={radius:9,tube:3.5,radialSegments:4,tubularSegments:24,arc:2*Math.PI,twist:.5};function F({onClose:s}){const[r,a]=i.useState(N),[l,t]=i.useState(f),[o,n]=i.useState(!0);return e.jsxs("div",{className:"polytorus-container",children:[e.jsx("button",{className:"polytorus-close-btn",onClick:s,"aria-label":"Cerrar visualizador",children:e.jsx(x,{size:24})}),e.jsx("button",{className:"polytorus-toggle-controls",onClick:()=>n(!o),"aria-label":o?"Ocultar controles":"Mostrar controles",children:o?"Ocultar":"Controles"}),e.jsx("div",{className:"polytorus-scene",children:e.jsx(i.Suspense,{fallback:e.jsxs("div",{className:"polytorus-loading",children:[e.jsx(g,{className:"polytorus-spinner",size:32}),e.jsx("span",{children:"Cargando escena 3D..."})]}),children:e.jsx(j,{theme:r,geometry:l})})}),o&&e.jsx("div",{className:"polytorus-overlay",children:e.jsx("div",{className:"polytorus-controls-wrapper",children:e.jsx(y,{currentTheme:r,onThemeChange:a,currentGeometry:l,onGeometryChange:t})})})]})}export{F as default};
